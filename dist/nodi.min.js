/*! nodi 14-08-2015 */
di={version:"0.3.3",createContext:function(){function a(a){for(;a.indexOf(" ")>=0;)a=a.replace(" ","");return a}var b={map:{}};return b.entry=function(a){return b.map[a]},b.register=function(a,c,d){var e=di.entry(a,b).type(c).args(d);return b.map[a]=e,e},b.has=function(a){return null!=b.entry(a)},b.get=function(a){if(b.has(a))return b.entry(a).object();throw"Object["+a+"] is not registered"},b.create=function(a,c){if(b.entry(a).strategy()!=di.strategy.proto)throw"Attempt to create singleton object";if(b.has(a))return b.entry(a).create(c);throw"Object["+a+"] is not registered"},b.initialize=function(){for(var a in b.map){var c=b.entry(a);b.ready(b.inject(a,b.get(a),c.dependencies()))}},b.clear=function(){this.map={}},b.inject=function(c,d,e){if(e=e?e:d.dependencies,d&&e){var f=a(e).split(",");f.forEach(function(a){if(a){var e=di.dependencyExpression(a),f=b.get(e.name);if(null==f)throw"Dependency ["+c+"."+e.property+"]->["+e.name+"] can not be satisfied";d[e.property]=f}})}return d},b.ready=function(a){return"function"==typeof a.ready&&a.ready(),a},b},dependencyExpression:function(a){var b={},c=a,d=a;if(a.indexOf("=")>0){var e=a.split("=");c=e[0],d=e[1]}return b.name=d,b.property=c,b},entry:function(a,b){var a,c,d,e,f,g={},h=di.strategy.singleton,i=di.factory.constructor;return g.create=function(g){return h(a,d,i,c,g?g:e,b,f)},g.object=function(a){return arguments.length?(d=a,g):d=g.create()},g.strategy=function(a){return arguments.length?(h=a,g):h},g.type=function(a){return arguments.length?(c=a,g):c},g.dependencies=function(a){return arguments.length?(f=a,g):f},g.args=function(a){return arguments.length?(e=a,g):e},g.factory=function(a){return arguments.length?(i=a,g):i},g},strategy:{proto:function(a,b,c,d,e,f,g){return b=c(d,e),f.ready(f.inject(a,b,g))},singleton:function(a,b,c,d,e,f,g){return b||(b=c(d,e)),b}},factory:{constructor:function(type,args){return args instanceof Array?eval(di.utils.invokeStmt(args,"new")):new type(args)},func:function(type,args){return args instanceof Array?eval(di.utils.invokeStmt(args)):type(args)}}},module&&"object"==typeof module&&module.exports&&"object"==typeof module.exports&&(module.exports=di),di.utils={},di.utils.invokeStmt=function(a,b){var c=b?b:"";c+=" type(";for(var d=0;d<a.length;++d)c+="args["+d+"],";return d>0&&(c=c.slice(0,c.length-1)),c+=")"};